{% extends 'base.html.twig' %}

{% block title %}Politique de confidentialité - TaskFlow{% endblock %}

{% block body %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-success text-white">
                    <h1 class="h3 mb-0">
                        <i class="fas fa-shield-alt me-2"></i>
                        Politique de confidentialité - TaskFlow
                    </h1>
                </div>
                <div class="card-body p-5">
                    <div class="alert alert-success">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>Dernière mise à jour :</strong> {{ 'now'|date('d/m/Y') }} | <strong>Conforme RGPD</strong>
                    </div>

                    <div class="alert alert-primary">
                        <h5><i class="fas fa-heart me-2"></i>Notre engagement</h5>
                        <p class="mb-0">Chez TaskFlow, nous respectons votre vie privée et nous engageons à protéger vos données personnelles conformément au Règlement Général sur la Protection des Données (RGPD).</p>
                    </div>

                    <h2>1. Responsable du traitement</h2>
                    <div class="bg-light p-3 rounded">
                        <strong>TaskFlow SAS</strong><br>
                        123 Avenue de la République<br>
                        75011 Paris, France<br>
                        Email: privacy@taskflow.app<br>
                        Délégué à la Protection des Données: dpo@taskflow.app
                    </div>

                    <h2>2. Données collectées</h2>
                    <h3>2.1 Données d'inscription</h3>
                    <ul>
                        <li><strong>Prénom et nom</strong> - Pour personnaliser votre expérience</li>
                        <li><strong>Adresse email</strong> - Pour l'authentification et les communications</li>
                        <li><strong>Mot de passe hashé</strong> - Pour sécuriser votre compte</li>
                        <li><strong>Date d'inscription</strong> - Pour la gestion du compte</li>
                    </ul>

                    <h3>2.2 Données d'utilisation</h3>
                    <ul>
                        <li><strong>Projets et tâches</strong> - Le contenu que vous créez</li>
                        <li><strong>Dates de création/modification</strong> - Pour l'historique</li>
                        <li><strong>Paramètres de priorité et statut</strong> - Pour l'organisation</li>
                    </ul>

                    <h3>2.3 Données techniques</h3>
                    <ul>
                        <li><strong>Adresse IP</strong> - Pour la sécurité et l'analyse</li>
                        <li><strong>Données de session</strong> - Pour maintenir la connexion</li>
                        <li><strong>Logs d'activité</strong> - Pour le support et la sécurité</li>
                    </ul>

                    <h2>3. Base légale du traitement</h2>
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr>
                                    <th>Finalité</th>
                                    <th>Base légale</th>
                                    <th>Durée de conservation</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Fourniture du service</td>
                                    <td>Contrat</td>
                                    <td>Durée du compte + 1 an</td>
                                </tr>
                                <tr>
                                    <td>Support client</td>
                                    <td>Intérêt légitime</td>
                                    <td>3 ans après résolution</td>
                                </tr>
                                <tr>
                                    <td>Sécurité</td>
                                    <td>Intérêt légitime</td>
                                    <td>1 an après incident</td>
                                </tr>
                                <tr>
                                    <td>Amélioration du service</td>
                                    <td>Consentement</td>
                                    <td>Jusqu'au retrait</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h2>4. Vos droits RGPD</h2>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="card h-100">
                                <div class="card-header bg-primary text-white">
                                    <i class="fas fa-eye me-2"></i>Droit d'accès
                                </div>
                                <div class="card-body">
                                    <p class="small">Vous pouvez demander une copie de toutes vos données personnelles.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="card h-100">
                                <div class="card-header bg-warning text-dark">
                                    <i class="fas fa-edit me-2"></i>Droit de rectification
                                </div>
                                <div class="card-body">
                                    <p class="small">Vous pouvez corriger vos données inexactes directement dans votre profil.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="card h-100">
                                <div class="card-header bg-danger text-white">
                                    <i class="fas fa-trash me-2"></i>Droit à l'effacement
                                </div>
                                <div class="card-body">
                                    <p class="small">Vous pouvez demander la suppression de vos données sous certaines conditions.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="card h-100">
                                <div class="card-header bg-info text-white">
                                    <i class="fas fa-download me-2"></i>Droit à la portabilité
                                </div>
                                <div class="card-body">
                                    <p class="small">Vous pouvez récupérer vos données dans un format structuré.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h2>5. Partage des données</h2>
                    <div class="alert alert-success">
                        <h5><i class="fas fa-lock me-2"></i>Principe de base</h5>
                        <p class="mb-0"><strong>Nous ne vendons jamais vos données personnelles.</strong> Vos projets et tâches restent privés et ne sont accessibles qu'à vous.</p>
                    </div>

                    <h3>5.1 Partage autorisé</h3>
                    <p>Nous pouvons partager vos données uniquement dans les cas suivants :</p>
                    <ul>
                        <li><strong>Prestataires de services</strong> - Hébergement sécurisé (avec accords de confidentialité)</li>
                        <li><strong>Obligations légales</strong> - Si requis par la loi ou une décision de justice</li>
                        <li><strong>Protection des droits</strong> - Pour protéger nos droits ou ceux des autres utilisateurs</li>
                    </ul>

                    <h2>6. Sécurité des données</h2>
                    <div class="row text-center mb-4">
                        <div class="col-md-4">
                            <i class="fas fa-shield-alt text-success fa-3x mb-2"></i>
                            <h5>Chiffrement</h5>
                            <p class="small">Toutes les données sont chiffrées en transit (HTTPS) et au repos.</p>
                        </div>
                        <div class="col-md-4">
                            <i class="fas fa-key text-primary fa-3x mb-2"></i>
                            <h5>Accès contrôlé</h5>
                            <p class="small">Accès limité aux données par des employés autorisés uniquement.</p>
                        </div>
                        <div class="col-md-4">
                            <i class="fas fa-database text-warning fa-3x mb-2"></i>
                            <h5>Sauvegardes</h5>
                            <p class="small">Sauvegardes régulières et sécurisées pour éviter la perte de données.</p>
                        </div>
                    </div>

                    <h2>7. Cookies et technologies similaires</h2>
                    <p>Nous utilisons des cookies pour :</p>
                    <ul>
                        <li><strong>Cookies essentiels</strong> - Maintenir votre session de connexion</li>
                        <li><strong>Cookies de sécurité</strong> - Protection contre les attaques CSRF</li>
                        <li><strong>Cookies de préférences</strong> - Mémoriser vos paramètres</li>
                    </ul>
                    <p><a href="{{ path('legal_cookies') }}" class="btn btn-outline-info btn-sm">Voir notre politique de cookies</a></p>

                    <h2>8. Transferts internationaux</h2>
                    <p>Vos données sont traitées et stockées dans l'Union Européenne. En cas de transfert hors UE, nous nous assurons d'un niveau de protection adéquat.</p>

                    <h2>9. Contact et exercice de vos droits</h2>
                    <div class="bg-light p-4 rounded">
                        <h5><i class="fas fa-envelope me-2"></i>Pour exercer vos droits :</h5>
                        <ul class="mb-0">
                            <li><strong>Email :</strong> privacy@taskflow.app</li>
                            <li><strong>Formulaire en ligne :</strong> (bientôt disponible)</li>
                            <li><strong>Courrier :</strong> TaskFlow SAS - Service Protection des Données</li>
                        </ul>
                        <p class="mt-3 mb-0"><small>Nous répondons dans un délai maximum de 30 jours.</small></p>
                    </div>

                    <h2>10. Réclamation</h2>
                    <p>Si vous estimez que vos droits ne sont pas respectés, vous pouvez déposer une réclamation auprès de la <strong>CNIL</strong> (Commission Nationale de l'Informatique et des Libertés).</p>

                    <div class="alert alert-info mt-4">
                        <h5><i class="fas fa-bell me-2"></i>Modifications de cette politique</h5>
                        <p class="mb-0">Nous vous informerons de toute modification importante par email et/ou via une notification dans l'application.</p>
                    </div>
                </div>
            </div>

            <div class="text-center mt-4">
                <div class="btn-group">
                    <a href="{{ path('legal_terms') }}" class="btn btn-outline-primary">
                        <i class="fas fa-file-contract"></i> Conditions d'utilisation
                    </a>
                    <a href="{{ path('legal_gdpr') }}" class="btn btn-outline-success">
                        <i class="fas fa-user-shield"></i> Mes droits RGPD
                    </a>
                    {% if app.user %}
                        <a href="{{ path('user_profile') }}" class="btn btn-primary">
                            <i class="fas fa-cog"></i> Gérer mes données
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}