<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>
			{% block title %}TaskFlow - Gestion de tÃ¢ches collaboratives
			{% endblock %}
		</title>
		<link
		rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>ðŸ“‹</text></svg>">

		<!-- Bootstrap CSS -->
		<link
		href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
		<!-- Font Awesome pour les icÃ´nes -->
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

		{% block stylesheets %}
			<style>
			/* Variables CSS personnalisÃ©es */:root
			{
				--primary-color: #3b82f6;
				--secondary-color: #64748b;
				--success-color: #10b981;
				--warning-color: #f59e0b;
				--danger-color: #ef4444;
				--light-bg: #f8fafc;
				--dark-text: #1e293b;
			}

			/* Styles gÃ©nÃ©raux */
			body {
				background-color: var(--light-bg);
				color: var(--dark-text);
				font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
			}

			/* Navigation */
			.navbar-brand {
				font-weight: 700;
				font-size: 1.5rem;
			}

			/* Sidebar */
			.sidebar {
				background: white;
				box-shadow: 0 0 20px rgba(0, 0, 0, 0.08);
				min-height: calc(100vh - 76px);
			}

			.sidebar .nav-link {
				color: var(--dark-text);
				padding: 0.75rem 1rem;
				border-radius: 8px;
				margin: 0.25rem 0;
				transition: all 0.2s;
			}

			.sidebar .nav-link:hover,
			.sidebar .nav-link.active {
				background-color: var(--primary-color);
				color: white;
			}

			/* Cards */
			.card {
				border: none;
				box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
				border-radius: 12px;
				transition: transform 0.2s, box-shadow 0.2s;
			}

			.card:hover {
				transform: translateY(-2px);
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
			}

			/* Boutons */
			.btn {
				border-radius: 8px;
				font-weight: 500;
				padding: 0.5rem 1rem;
			}

			.btn-primary {
				background-color: var(--primary-color);
				border-color: var(--primary-color);
			}

			/* Badges de statut */
			.badge-todo {
				background-color: var(--secondary-color);
			}
			.badge-progress {
				background-color: var(--warning-color);
			}
			.badge-completed {
				background-color: var(--success-color);
			}

			/* Badges de prioritÃ© */
			.badge-priority-low {
				background-color: #6b7280;
			}
			.badge-priority-medium {
				background-color: var(--warning-color);
			}
			.badge-priority-high {
				background-color: var(--danger-color);
			}

			/* Barres de progression */
			.progress {
				height: 8px;
				border-radius: 4px;
			}

			/* Alertes */
			.alert {
				border: none;
				border-radius: 8px;
			}

			/* Footer */
			footer {
				background: white;
				border-top: 1px solid #e2e8f0;
			}

			/* Animations */
			.fade-in {
				animation: fadeIn 0.5s ease-in;
			}

			@keyframes fadeIn {
				from {
					opacity: 0;
					transform: translateY(10px);
				}
				to {
					opacity: 1;
					transform: translateY(0);
				}
			}

			/* Responsive */
			@media(max-width: 768px) {
				.sidebar {
					margin-bottom: 2rem;
				}
			}
		</style>
	{% endblock %}
</head>

<body>
	<!-- Navigation -->
	<nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
		<div class="container-fluid">
			<a class="navbar-brand" href="{{ path('app_home') }}">
				ðŸ“‹ TaskFlow
			</a>

			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse" id="navbarNav">
				<ul class="navbar-nav me-auto">
					{% if app.user %}
						<li class="nav-item">
							<a class="nav-link" href="{{ path('app_dashboard') }}">
								<i class="fas fa-tachometer-alt"></i>
								Tableau de bord
							</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="{{ path('project_index') }}">
								<i class="fas fa-folder"></i>
								Mes Projets
							</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="{{ path('task_index') }}">
								<i class="fas fa-tasks"></i>
								Mes TÃ¢ches
							</a>
						</li>
					{% endif %}
				</ul>

				<ul class="navbar-nav">
					{% if app.user %}
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
								<i class="fas fa-user"></i>
								{{ app.user.fullName }}
							</a>
							<ul class="dropdown-menu">
								<li>
									<a class="dropdown-item" href="{{ path('user_profile') }}">
										<i class="fas fa-user-edit"></i>
										Mon Profil</a>
								</li>
								{% if is_granted('ROLE_ADMIN') %}
									<li>
										<a class="dropdown-item" href="#">
											<i class="fas fa-cogs"></i>
											Administration</a>
									</li>
								{% endif %}
								<li><hr class="dropdown-divider"></li>
								<li>
									<a class="dropdown-item" href="{{ path('app_logout') }}">
										<i class="fas fa-sign-out-alt"></i>
										DÃ©connexion</a>
								</li>
							</ul>
						</li>
					{% else %}
						<li class="nav-item">
							<a class="nav-link" href="{{ path('app_login') }}">
								<i class="fas fa-sign-in-alt"></i>
								Connexion
							</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="{{ path('app_register') }}">
								<i class="fas fa-user-plus"></i>
								Inscription
							</a>
						</li>
					{% endif %}
				</ul>
			</div>
		</div>
	</nav>

	<!-- Contenu principal -->
	<div
		class="container-fluid py-4">
		<!-- Messages Flash -->
		{% for type, messages in app.flashes %}
			{% for message in messages %}
				<div class="alert alert-{{ type == 'error' ? 'danger' : type }} alert-dismissible fade show" role="alert">
					<i class="fas fa-{{ type == 'success' ? 'check-circle' : (type == 'error' ? 'exclamation-triangle' : 'info-circle') }}"></i>
					{{ message }}
					<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
				</div>
			{% endfor %}
		{% endfor %}

		{% block body %}{% endblock %}
	</div>

	<!-- Footer -->
	<footer class="mt-5 py-4 text-center text-muted">
		<div class="container">
			<p>&copy;
				{{ 'now'|date('Y') }}
				TaskFlow - Application de gestion de tÃ¢ches collaboratives</p>
			<small>DÃ©veloppÃ© avec Symfony et beaucoup de â˜•</small>
		</div>
	</footer>

	<!-- Scripts -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	{% block javascripts %}
		<script>
			// Auto-hide alerts after 5 seconds
document.addEventListener('DOMContentLoaded', function () {
const alerts = document.querySelectorAll('.alert:not(.alert-danger)');
alerts.forEach(function (alert) {
setTimeout(function () {
const bsAlert = new bootstrap.Alert(alert);
bsAlert.close();
}, 5000);
});
});
		</script>
	{% endblock %}
</body></html>
