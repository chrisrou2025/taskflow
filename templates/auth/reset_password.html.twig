{% extends 'base.html.twig' %}

{% block title %}Réinitialiser mot de passe - TaskFlow
{% endblock %}

{% block body %}
	<div class="container reset-password-page">
		<div class="row justify-content-center align-items-center auth-container">
			<div class="col-md-6 col-lg-5">
				<div class="card border-0 shadow-lg auth-card">
					<div class="card-body p-5">
						<!-- Header -->
						<div class="text-center mb-4">
							<div class="mb-3">
								<i class="fas fa-lock-open text-success fa-3x"></i>
							</div>
							<h2 class="h3 mb-2">Nouveau mot de passe</h2>
							<p class="text-muted">Bonjour {{ user.firstName }}, choisissez un nouveau mot de passe sécurisé</p>
						</div>

						<!-- Conseils de sécurité -->
						<div class="alert alert-info">
							<i class="fas fa-info-circle me-2"></i>
							<strong>Conseils pour un mot de passe sécurisé :</strong>
							<ul class="mb-0 mt-2 small">
								<li>Au moins 8 caractères</li>
								<li>Mélange de lettres, chiffres et symboles</li>
								<li>Évitez les informations personnelles</li>
							</ul>
						</div>

						<form method="post" class="form-container needs-validation" novalidate>
							<!-- Nouveau mot de passe -->
							<div class="mb-3">
								<label for="password" class="form-label fw-semibold required-field">
									<i class="fas fa-key me-1 text-success"></i>Nouveau mot de passe
								</label>
								<div class="auth-input-group input-group">
									<span class="input-group-text bg-light">
										<i class="fas fa-lock text-muted"></i>
									</span>
									<input type="password" class="form-control" id="password" name="password" placeholder="Votre nouveau mot de passe" minlength="6" required>
									<button class="btn btn-outline-secondary" type="button" onclick="togglePassword('password')">
										<i class="fas fa-eye" id="password_icon"></i>
									</button>
								</div>
								<!-- Indicateur de force du mot de passe -->
								<div class="progress mt-2 password-strength-bar">
									<div id="password_strength" class="progress-bar" style="width: 0%"></div>
								</div>
								<div class="form-text" id="password_help">Minimum 6 caractères requis</div>
								<div class="invalid-feedback">
									Veuillez saisir un mot de passe d'au moins 6 caractères
								</div>
							</div>

							<!-- Confirmation du nouveau mot de passe -->
							<div class="mb-4">
								<label for="confirm_password" class="form-label fw-semibold required-field">
									<i class="fas fa-check-circle me-1 text-success"></i>Confirmer le mot de passe
								</label>
								<div class="auth-input-group input-group">
									<span class="input-group-text bg-light">
										<i class="fas fa-lock text-muted"></i>
									</span>
									<input type="password" class="form-control" id="confirm_password" name="confirm_password" placeholder="Confirmez votre nouveau mot de passe" required>
									<button class="btn btn-outline-secondary" type="button" onclick="togglePassword('confirm_password')">
										<i class="fas fa-eye" id="confirm_password_icon"></i>
									</button>
								</div>
								<div class="form-text" id="confirm_help">Les mots de passe doivent être identiques</div>
								<div class="invalid-feedback">
									Veuillez confirmer votre mot de passe
								</div>
							</div>

							<!-- Boutons d'action -->
							<div class="form-actions">
								<div class="d-flex justify-content-between align-items-center">
									<a href="{{ path('app_login') }}" class="btn btn-outline-secondary btn-form">
										<i class="fas fa-arrow-left me-2"></i>Retour connexion
									</a>
									<button type="submit" class="btn btn-success btn-lg auth-btn auth-btn-success">
										<i class="fas fa-save me-2"></i>Réinitialiser
									</button>
								</div>
							</div>
						</form>
					</div>
				</div>

				<!-- Section confidentialité -->
				<div class="auth-security-icons text-center mt-4">
					<div class="auth-security-icon">
						<i class="fas fa-shield-alt text-success"></i>
						<p class="small mb-0 text-white">Sécurisé</p>
					</div>
					<div class="auth-security-icon">
						<i class="fas fa-user-shield text-primary"></i>
						<p class="small mb-0 text-white">RGPD</p>
					</div>
					<div class="auth-security-icon">
						<i class="fas fa-eye-slash text-info"></i>
						<p class="small mb-0 text-white">Privé</p>
					</div>
				</div>
				<p class="small text-white-50 mt-2 text-center">
					Vos données sont protégées selon nos
					<a href="{{ path('legal_privacy') }}" class="text-white text-decoration-none" target="_blank">
						politiques de confidentialité
					</a>
				</p>
			</div>
		</div>
	</div>
{% endblock %}

{% block stylesheets %}
	{{ parent() }}
	<!-- L'arrière-plan dégradé vert pour la réinitialisation -->
	<style>
		body {
			background: linear-gradient(135deg, #10b981 0%, #059669 100%);
			background-attachment: fixed;
		}
	</style>
{% endblock %}